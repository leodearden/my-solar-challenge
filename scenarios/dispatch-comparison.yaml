# Dispatch Strategy Comparison Scenario
#
# 30 homes in Bristol demonstrating all three dispatch strategies:
# - 10 homes: self_consumption (default — maximize own PV usage)
# - 10 homes: tou_optimized (charge off-peak, discharge during peak)
# - 10 homes: peak_shaving (limit grid import to 2 kW threshold)
#
# All homes have identical PV (4 kW) and battery (10 kWh) to isolate
# the effect of dispatch strategy on grid flows and battery behaviour.

name: Dispatch Strategy Comparison

location:
  latitude: 51.45
  longitude: -2.58
  timezone: Europe/London
  altitude: 11.0
  name: Bristol, UK

homes:
  # --- Self-Consumption Strategy (10 homes) ---
  - name: SC-01
    pv:
      capacity_kw: 4.0
      azimuth: 180
      tilt: 35
    battery:
      capacity_kwh: 10.0
      max_charge_kw: 3.0
      max_discharge_kw: 3.0
      dispatch_strategy:
        strategy_type: self_consumption
    load:
      annual_consumption_kwh: 3400

  - name: SC-02
    pv:
      capacity_kw: 4.0
      azimuth: 180
      tilt: 35
    battery:
      capacity_kwh: 10.0
      max_charge_kw: 3.0
      max_discharge_kw: 3.0
      dispatch_strategy:
        strategy_type: self_consumption
    load:
      annual_consumption_kwh: 3200

  - name: SC-03
    pv:
      capacity_kw: 4.0
      azimuth: 180
      tilt: 35
    battery:
      capacity_kwh: 10.0
      max_charge_kw: 3.0
      max_discharge_kw: 3.0
      dispatch_strategy:
        strategy_type: self_consumption
    load:
      annual_consumption_kwh: 3600

  - name: SC-04
    pv:
      capacity_kw: 4.0
      azimuth: 180
      tilt: 35
    battery:
      capacity_kwh: 10.0
      max_charge_kw: 3.0
      max_discharge_kw: 3.0
      dispatch_strategy:
        strategy_type: self_consumption
    load:
      annual_consumption_kwh: 3000

  - name: SC-05
    pv:
      capacity_kw: 4.0
      azimuth: 180
      tilt: 35
    battery:
      capacity_kwh: 10.0
      max_charge_kw: 3.0
      max_discharge_kw: 3.0
      dispatch_strategy:
        strategy_type: self_consumption
    load:
      annual_consumption_kwh: 3800

  - name: SC-06
    pv:
      capacity_kw: 4.0
      azimuth: 180
      tilt: 35
    battery:
      capacity_kwh: 10.0
      max_charge_kw: 3.0
      max_discharge_kw: 3.0
      dispatch_strategy:
        strategy_type: self_consumption
    load:
      annual_consumption_kwh: 3400

  - name: SC-07
    pv:
      capacity_kw: 4.0
      azimuth: 180
      tilt: 35
    battery:
      capacity_kwh: 10.0
      max_charge_kw: 3.0
      max_discharge_kw: 3.0
      dispatch_strategy:
        strategy_type: self_consumption
    load:
      annual_consumption_kwh: 3100

  - name: SC-08
    pv:
      capacity_kw: 4.0
      azimuth: 180
      tilt: 35
    battery:
      capacity_kwh: 10.0
      max_charge_kw: 3.0
      max_discharge_kw: 3.0
      dispatch_strategy:
        strategy_type: self_consumption
    load:
      annual_consumption_kwh: 3500

  - name: SC-09
    pv:
      capacity_kw: 4.0
      azimuth: 180
      tilt: 35
    battery:
      capacity_kwh: 10.0
      max_charge_kw: 3.0
      max_discharge_kw: 3.0
      dispatch_strategy:
        strategy_type: self_consumption
    load:
      annual_consumption_kwh: 3700

  - name: SC-10
    pv:
      capacity_kw: 4.0
      azimuth: 180
      tilt: 35
    battery:
      capacity_kwh: 10.0
      max_charge_kw: 3.0
      max_discharge_kw: 3.0
      dispatch_strategy:
        strategy_type: self_consumption
    load:
      annual_consumption_kwh: 3300

  # --- TOU-Optimized Strategy (10 homes) ---
  # Peak hours: 16:00-19:00 (typical UK evening peak)
  # Off-peak hours: 00:00-07:00 (overnight cheap rate)
  - name: TOU-01
    pv:
      capacity_kw: 4.0
      azimuth: 180
      tilt: 35
    battery:
      capacity_kwh: 10.0
      max_charge_kw: 3.0
      max_discharge_kw: 3.0
      dispatch_strategy:
        strategy_type: tou_optimized
        peak_hours: [[16, 19]]
        off_peak_hours: [[0, 7]]
    load:
      annual_consumption_kwh: 3400

  - name: TOU-02
    pv:
      capacity_kw: 4.0
      azimuth: 180
      tilt: 35
    battery:
      capacity_kwh: 10.0
      max_charge_kw: 3.0
      max_discharge_kw: 3.0
      dispatch_strategy:
        strategy_type: tou_optimized
        peak_hours: [[16, 19]]
        off_peak_hours: [[0, 7]]
    load:
      annual_consumption_kwh: 3200

  - name: TOU-03
    pv:
      capacity_kw: 4.0
      azimuth: 180
      tilt: 35
    battery:
      capacity_kwh: 10.0
      max_charge_kw: 3.0
      max_discharge_kw: 3.0
      dispatch_strategy:
        strategy_type: tou_optimized
        peak_hours: [[16, 19]]
        off_peak_hours: [[0, 7]]
    load:
      annual_consumption_kwh: 3600

  - name: TOU-04
    pv:
      capacity_kw: 4.0
      azimuth: 180
      tilt: 35
    battery:
      capacity_kwh: 10.0
      max_charge_kw: 3.0
      max_discharge_kw: 3.0
      dispatch_strategy:
        strategy_type: tou_optimized
        peak_hours: [[16, 19]]
        off_peak_hours: [[0, 7]]
    load:
      annual_consumption_kwh: 3000

  - name: TOU-05
    pv:
      capacity_kw: 4.0
      azimuth: 180
      tilt: 35
    battery:
      capacity_kwh: 10.0
      max_charge_kw: 3.0
      max_discharge_kw: 3.0
      dispatch_strategy:
        strategy_type: tou_optimized
        peak_hours: [[16, 19]]
        off_peak_hours: [[0, 7]]
    load:
      annual_consumption_kwh: 3800

  - name: TOU-06
    pv:
      capacity_kw: 4.0
      azimuth: 180
      tilt: 35
    battery:
      capacity_kwh: 10.0
      max_charge_kw: 3.0
      max_discharge_kw: 3.0
      dispatch_strategy:
        strategy_type: tou_optimized
        peak_hours: [[16, 19]]
        off_peak_hours: [[0, 7]]
    load:
      annual_consumption_kwh: 3400

  - name: TOU-07
    pv:
      capacity_kw: 4.0
      azimuth: 180
      tilt: 35
    battery:
      capacity_kwh: 10.0
      max_charge_kw: 3.0
      max_discharge_kw: 3.0
      dispatch_strategy:
        strategy_type: tou_optimized
        peak_hours: [[16, 19]]
        off_peak_hours: [[0, 7]]
    load:
      annual_consumption_kwh: 3100

  - name: TOU-08
    pv:
      capacity_kw: 4.0
      azimuth: 180
      tilt: 35
    battery:
      capacity_kwh: 10.0
      max_charge_kw: 3.0
      max_discharge_kw: 3.0
      dispatch_strategy:
        strategy_type: tou_optimized
        peak_hours: [[16, 19]]
        off_peak_hours: [[0, 7]]
    load:
      annual_consumption_kwh: 3500

  - name: TOU-09
    pv:
      capacity_kw: 4.0
      azimuth: 180
      tilt: 35
    battery:
      capacity_kwh: 10.0
      max_charge_kw: 3.0
      max_discharge_kw: 3.0
      dispatch_strategy:
        strategy_type: tou_optimized
        peak_hours: [[16, 19]]
        off_peak_hours: [[0, 7]]
    load:
      annual_consumption_kwh: 3700

  - name: TOU-10
    pv:
      capacity_kw: 4.0
      azimuth: 180
      tilt: 35
    battery:
      capacity_kwh: 10.0
      max_charge_kw: 3.0
      max_discharge_kw: 3.0
      dispatch_strategy:
        strategy_type: tou_optimized
        peak_hours: [[16, 19]]
        off_peak_hours: [[0, 7]]
    load:
      annual_consumption_kwh: 3300

  # --- Peak-Shaving Strategy (10 homes) ---
  # Limit grid import to 2 kW — battery discharges to cover demand above this threshold
  - name: PS-01
    pv:
      capacity_kw: 4.0
      azimuth: 180
      tilt: 35
    battery:
      capacity_kwh: 10.0
      max_charge_kw: 3.0
      max_discharge_kw: 3.0
      dispatch_strategy:
        strategy_type: peak_shaving
        import_limit_kw: 2.0
    load:
      annual_consumption_kwh: 3400

  - name: PS-02
    pv:
      capacity_kw: 4.0
      azimuth: 180
      tilt: 35
    battery:
      capacity_kwh: 10.0
      max_charge_kw: 3.0
      max_discharge_kw: 3.0
      dispatch_strategy:
        strategy_type: peak_shaving
        import_limit_kw: 2.0
    load:
      annual_consumption_kwh: 3200

  - name: PS-03
    pv:
      capacity_kw: 4.0
      azimuth: 180
      tilt: 35
    battery:
      capacity_kwh: 10.0
      max_charge_kw: 3.0
      max_discharge_kw: 3.0
      dispatch_strategy:
        strategy_type: peak_shaving
        import_limit_kw: 2.0
    load:
      annual_consumption_kwh: 3600

  - name: PS-04
    pv:
      capacity_kw: 4.0
      azimuth: 180
      tilt: 35
    battery:
      capacity_kwh: 10.0
      max_charge_kw: 3.0
      max_discharge_kw: 3.0
      dispatch_strategy:
        strategy_type: peak_shaving
        import_limit_kw: 2.0
    load:
      annual_consumption_kwh: 3000

  - name: PS-05
    pv:
      capacity_kw: 4.0
      azimuth: 180
      tilt: 35
    battery:
      capacity_kwh: 10.0
      max_charge_kw: 3.0
      max_discharge_kw: 3.0
      dispatch_strategy:
        strategy_type: peak_shaving
        import_limit_kw: 2.0
    load:
      annual_consumption_kwh: 3800

  - name: PS-06
    pv:
      capacity_kw: 4.0
      azimuth: 180
      tilt: 35
    battery:
      capacity_kwh: 10.0
      max_charge_kw: 3.0
      max_discharge_kw: 3.0
      dispatch_strategy:
        strategy_type: peak_shaving
        import_limit_kw: 2.0
    load:
      annual_consumption_kwh: 3400

  - name: PS-07
    pv:
      capacity_kw: 4.0
      azimuth: 180
      tilt: 35
    battery:
      capacity_kwh: 10.0
      max_charge_kw: 3.0
      max_discharge_kw: 3.0
      dispatch_strategy:
        strategy_type: peak_shaving
        import_limit_kw: 2.0
    load:
      annual_consumption_kwh: 3100

  - name: PS-08
    pv:
      capacity_kw: 4.0
      azimuth: 180
      tilt: 35
    battery:
      capacity_kwh: 10.0
      max_charge_kw: 3.0
      max_discharge_kw: 3.0
      dispatch_strategy:
        strategy_type: peak_shaving
        import_limit_kw: 2.0
    load:
      annual_consumption_kwh: 3500

  - name: PS-09
    pv:
      capacity_kw: 4.0
      azimuth: 180
      tilt: 35
    battery:
      capacity_kwh: 10.0
      max_charge_kw: 3.0
      max_discharge_kw: 3.0
      dispatch_strategy:
        strategy_type: peak_shaving
        import_limit_kw: 2.0
    load:
      annual_consumption_kwh: 3700

  - name: PS-10
    pv:
      capacity_kw: 4.0
      azimuth: 180
      tilt: 35
    battery:
      capacity_kwh: 10.0
      max_charge_kw: 3.0
      max_discharge_kw: 3.0
      dispatch_strategy:
        strategy_type: peak_shaving
        import_limit_kw: 2.0
    load:
      annual_consumption_kwh: 3300
