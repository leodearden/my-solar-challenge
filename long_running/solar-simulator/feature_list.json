{
  "project": "Solar Challenge Energy Flow Simulator",
  "version": "0.1",
  "created": "2026-01-28",
  "categories": [
    {
      "name": "Project Setup",
      "priority": 1,
      "features": [
        {
          "id": "SETUP-001",
          "description": "Python project structure with pyproject.toml",
          "acceptance_criteria": [
            "pyproject.toml exists with project metadata",
            "src/solar_challenge/ package directory exists",
            "src/solar_challenge/__init__.py exists with version string",
            "Package can be installed in editable mode with pip install -e ."
          ],
          "dependencies": [],
          "passes": true
        },
        {
          "id": "SETUP-002",
          "description": "Core dependencies installed and importable",
          "acceptance_criteria": [
            "pvlib imports successfully",
            "pandas imports successfully",
            "numpy imports successfully",
            "pytest imports successfully"
          ],
          "dependencies": ["SETUP-001"],
          "passes": true
        },
        {
          "id": "SETUP-003",
          "description": "Test framework with TDD directory structure",
          "acceptance_criteria": [
            "tests/unit/ directory exists",
            "tests/integration/ directory exists",
            "tests/conftest.py exists with basic fixtures",
            "pytest discovers and runs tests from both directories",
            "pytest.ini or pyproject.toml contains pytest configuration"
          ],
          "dependencies": ["SETUP-001"],
          "passes": true
        },
        {
          "id": "SETUP-004",
          "description": "Git repository with appropriate .gitignore",
          "acceptance_criteria": [
            ".gitignore excludes venv/, __pycache__/, *.pyc, .pytest_cache/",
            ".gitignore excludes IDE files (.vscode/, .idea/)",
            ".gitignore excludes data cache directories",
            "Repository has at least one commit"
          ],
          "dependencies": [],
          "passes": true
        },
        {
          "id": "SETUP-005",
          "description": "README with project overview and setup instructions",
          "acceptance_criteria": [
            "README.md exists in project root",
            "README describes project purpose (Solar Challenge simulator)",
            "README includes setup instructions (venv, pip install)",
            "README includes instructions to run tests"
          ],
          "dependencies": [],
          "passes": true
        },
        {
          "id": "SETUP-006",
          "description": "Type checking configuration with mypy",
          "acceptance_criteria": [
            "mypy configuration in pyproject.toml",
            "mypy src/ runs without configuration errors",
            "Strict mode enabled for new code"
          ],
          "dependencies": ["SETUP-001"],
          "passes": true
        }
      ]
    },
    {
      "name": "Location and Weather",
      "priority": 1,
      "features": [
        {
          "id": "LOC-001",
          "description": "Location class for Bristol with geographic parameters",
          "acceptance_criteria": [
            "Location dataclass/class exists with lat, lon, timezone, altitude attributes",
            "Default Bristol location: 51.45°N, 2.58°W, Europe/London, 11m altitude",
            "Location can be instantiated with custom parameters",
            "Location is hashable and can be used as dict key"
          ],
          "dependencies": ["SETUP-001"],
          "passes": true
        },
        {
          "id": "LOC-002",
          "description": "PVGIS TMY data retrieval for a location",
          "acceptance_criteria": [
            "Function retrieves TMY data from PVGIS API using pvlib.iotools.get_pvgis_tmy()",
            "Returns pandas DataFrame with datetime index",
            "DataFrame contains GHI, DNI, DHI, temperature columns",
            "Works for Bristol default location"
          ],
          "dependencies": ["LOC-001", "SETUP-002"],
          "passes": true
        },
        {
          "id": "LOC-003",
          "description": "PVGIS hourly historical data retrieval for date range",
          "acceptance_criteria": [
            "Function retrieves hourly data using pvlib.iotools.get_pvgis_hourly()",
            "Accepts start_date and end_date parameters",
            "Returns pandas DataFrame with datetime index",
            "DataFrame contains irradiance and temperature data"
          ],
          "dependencies": ["LOC-001", "SETUP-002"],
          "passes": false
        },
        {
          "id": "LOC-004",
          "description": "Weather data caching to avoid repeated API calls",
          "acceptance_criteria": [
            "Cache directory exists (default: .cache/weather/)",
            "First retrieval saves data to cache file",
            "Subsequent requests for same location/dates load from cache",
            "Cache can be invalidated/cleared programmatically"
          ],
          "dependencies": ["LOC-002", "LOC-003"],
          "passes": false
        },
        {
          "id": "LOC-005",
          "description": "Irradiance data validation",
          "acceptance_criteria": [
            "Validation function checks GHI, DNI, DHI are present",
            "Validates values are non-negative",
            "Validates GHI <= DNI + DHI (approximately)",
            "Raises clear error on invalid data with specific issue identified"
          ],
          "dependencies": ["LOC-002"],
          "passes": true
        },
        {
          "id": "LOC-006",
          "description": "Temperature data extraction for cell temperature modelling",
          "acceptance_criteria": [
            "Extracts ambient temperature from weather data",
            "Extracts wind speed if available (for cell temp calculation)",
            "Returns temperature series aligned with irradiance data",
            "Handles missing wind data gracefully (default assumption)"
          ],
          "dependencies": ["LOC-002"],
          "passes": true
        }
      ]
    },
    {
      "name": "PV System Modelling",
      "priority": 1,
      "features": [
        {
          "id": "PV-001",
          "description": "PV system configuration dataclass",
          "acceptance_criteria": [
            "PVConfig dataclass with capacity_kw, azimuth, tilt attributes",
            "Default values: 4 kW capacity, 180° azimuth (south), 35° tilt",
            "Validation that capacity > 0, azimuth 0-360, tilt 0-90",
            "Optional name/identifier field"
          ],
          "dependencies": ["SETUP-001"],
          "passes": true
        },
        {
          "id": "PV-002",
          "description": "pvlib PVSystem and Array setup from config",
          "acceptance_criteria": [
            "Function creates pvlib.pvsystem.PVSystem from PVConfig",
            "Array configured with correct surface_azimuth and surface_tilt",
            "Uses CEC module database for realistic panel parameters",
            "Uses CEC inverter database for realistic inverter parameters"
          ],
          "dependencies": ["PV-001", "SETUP-002"],
          "passes": false
        },
        {
          "id": "PV-003",
          "description": "pvlib ModelChain for AC power output calculation",
          "acceptance_criteria": [
            "ModelChain created with PVSystem and Location",
            "Can run simulation with weather data input",
            "Returns AC power output time series",
            "Handles all required transposition and loss calculations"
          ],
          "dependencies": ["PV-002", "LOC-001"],
          "passes": false
        },
        {
          "id": "PV-004",
          "description": "Configurable panel parameters",
          "acceptance_criteria": [
            "Panel efficiency can be specified (default ~20%)",
            "Temperature coefficient configurable (default -0.4%/°C)",
            "Can use custom module parameters instead of CEC database",
            "Parameters affect generation output appropriately"
          ],
          "dependencies": ["PV-002"],
          "passes": false
        },
        {
          "id": "PV-005",
          "description": "Configurable inverter parameters",
          "acceptance_criteria": [
            "Inverter efficiency configurable (default 96%)",
            "Inverter capacity configurable (typically matches PV capacity)",
            "Can use custom inverter parameters instead of CEC database",
            "Clipping occurs when DC power exceeds inverter capacity"
          ],
          "dependencies": ["PV-002"],
          "passes": false
        },
        {
          "id": "PV-006",
          "description": "Annual degradation application",
          "acceptance_criteria": [
            "Degradation rate configurable (default 0.5%/year)",
            "Function applies degradation factor based on system age",
            "Year 0 = 100%, Year 1 = 99.5%, Year 10 = 95%, etc.",
            "Degradation applied as multiplier to generation output"
          ],
          "dependencies": ["PV-003"],
          "passes": false
        },
        {
          "id": "PV-007",
          "description": "Generation time series output at 1-minute resolution",
          "acceptance_criteria": [
            "Output DataFrame has 1-minute frequency DatetimeIndex",
            "Hourly PVGIS data interpolated to 1-minute (simple division for V0.1)",
            "Power values in kW",
            "No negative values in output",
            "Sum of interpolated values preserves hourly energy total"
          ],
          "dependencies": ["PV-003"],
          "passes": false
        }
      ]
    },
    {
      "name": "Battery Modelling",
      "priority": 2,
      "features": [
        {
          "id": "BAT-001",
          "description": "Battery configuration dataclass",
          "acceptance_criteria": [
            "BatteryConfig dataclass with capacity_kwh, max_charge_kw, max_discharge_kw",
            "Default values: 5 kWh capacity, 2.5 kW charge, 2.5 kW discharge",
            "Validation that all values are positive",
            "Optional name/identifier field"
          ],
          "dependencies": ["SETUP-001"],
          "passes": true
        },
        {
          "id": "BAT-002",
          "description": "State of charge (SOC) tracking",
          "acceptance_criteria": [
            "Battery class tracks current SOC in kWh",
            "SOC initialized to configurable starting value",
            "SOC updated after each charge/discharge operation",
            "SOC queryable at any time"
          ],
          "dependencies": ["BAT-001"],
          "passes": true
        },
        {
          "id": "BAT-003",
          "description": "Charge efficiency losses",
          "acceptance_criteria": [
            "Charge efficiency configurable (default 97.5% for 95% round-trip)",
            "Energy stored = energy input * charge efficiency",
            "Efficiency loss tracked separately if needed for reporting",
            "Efficiency applied during charge operations"
          ],
          "dependencies": ["BAT-002"],
          "passes": true
        },
        {
          "id": "BAT-004",
          "description": "Discharge efficiency losses",
          "acceptance_criteria": [
            "Discharge efficiency configurable (default 97.5% for 95% round-trip)",
            "Energy output = energy withdrawn * discharge efficiency",
            "Efficiency loss tracked separately if needed for reporting",
            "Efficiency applied during discharge operations"
          ],
          "dependencies": ["BAT-002"],
          "passes": true
        },
        {
          "id": "BAT-005",
          "description": "SOC limits enforcement",
          "acceptance_criteria": [
            "Minimum SOC configurable (default 10% of capacity)",
            "Maximum SOC configurable (default 90% of capacity)",
            "Charge operation stops when max SOC reached",
            "Discharge operation stops when min SOC reached",
            "Usable capacity = max_soc - min_soc"
          ],
          "dependencies": ["BAT-002"],
          "passes": true
        },
        {
          "id": "BAT-006",
          "description": "Charge from excess PV logic",
          "acceptance_criteria": [
            "Method accepts excess_power_kw and timestep_minutes",
            "Charges at min(excess_power, max_charge_kw)",
            "Respects max SOC limit",
            "Returns actual energy charged in kWh",
            "Updates internal SOC state"
          ],
          "dependencies": ["BAT-003", "BAT-005"],
          "passes": true
        },
        {
          "id": "BAT-007",
          "description": "Discharge to meet demand logic",
          "acceptance_criteria": [
            "Method accepts demand_kw and timestep_minutes",
            "Discharges at min(demand, max_discharge_kw)",
            "Respects min SOC limit",
            "Returns actual energy discharged in kWh",
            "Updates internal SOC state"
          ],
          "dependencies": ["BAT-004", "BAT-005"],
          "passes": true
        },
        {
          "id": "BAT-008",
          "description": "SOC time series output at 1-minute resolution",
          "acceptance_criteria": [
            "Battery simulation returns SOC history",
            "SOC recorded at each 1-minute timestep",
            "Output as pandas Series with DatetimeIndex",
            "Values in kWh and/or percentage of capacity"
          ],
          "dependencies": ["BAT-006", "BAT-007"],
          "passes": false
        }
      ]
    },
    {
      "name": "Load Profile Generation",
      "priority": 2,
      "features": [
        {
          "id": "LOAD-001",
          "description": "Integration with richardsonpy for stochastic load profiles",
          "acceptance_criteria": [
            "richardsonpy installed and importable",
            "Function generates 1-minute resolution load profile",
            "Profile covers specified date range",
            "Profile reflects UK domestic consumption patterns"
          ],
          "dependencies": ["SETUP-001"],
          "passes": false
        },
        {
          "id": "LOAD-002",
          "description": "Fallback to Elexon Profile Class 1 shape",
          "acceptance_criteria": [
            "Fallback activates if richardsonpy unavailable or fails",
            "Uses Elexon Profile Class 1 (domestic unrestricted) shape",
            "Scales profile to match target annual consumption",
            "Returns 1-minute resolution profile (interpolated from half-hourly)"
          ],
          "dependencies": ["SETUP-001"],
          "passes": false
        },
        {
          "id": "LOAD-003",
          "description": "Configurable annual consumption",
          "acceptance_criteria": [
            "Annual consumption parameter in kWh (default 3,400)",
            "Generated profile scales to match annual target",
            "Scaling preserves temporal shape of consumption",
            "Can verify sum of profile approximately equals annual target"
          ],
          "dependencies": ["LOAD-001", "LOAD-002"],
          "passes": false
        },
        {
          "id": "LOAD-004",
          "description": "Household size parameter affecting consumption",
          "acceptance_criteria": [
            "Household size parameter (1-5+ occupants)",
            "Size affects annual consumption (larger = more)",
            "Default consumption values per size from Ofgem TDCV",
            "Size may also affect profile shape in richardsonpy"
          ],
          "dependencies": ["LOAD-003"],
          "passes": false
        },
        {
          "id": "LOAD-005",
          "description": "Seasonal scaling of consumption",
          "acceptance_criteria": [
            "Winter months have higher consumption than summer",
            "Seasonal pattern reflects UK domestic usage",
            "Scaling factors configurable or from defaults",
            "Applied on top of base profile shape"
          ],
          "dependencies": ["LOAD-003"],
          "passes": false
        },
        {
          "id": "LOAD-006",
          "description": "Demand time series output at 1-minute resolution",
          "acceptance_criteria": [
            "Output as pandas Series with 1-minute DatetimeIndex",
            "Values in kW (power, not energy)",
            "No negative values",
            "Timezone-aware index matching location"
          ],
          "dependencies": ["LOAD-001", "LOAD-002"],
          "passes": false
        }
      ]
    },
    {
      "name": "Energy Flow Logic",
      "priority": 1,
      "features": [
        {
          "id": "FLOW-001",
          "description": "Self-consumption calculation",
          "acceptance_criteria": [
            "Self-consumption = min(generation, demand) at each timestep",
            "Function accepts generation and demand series",
            "Returns self-consumption series same length as inputs",
            "All values non-negative"
          ],
          "dependencies": ["SETUP-001"],
          "passes": true
        },
        {
          "id": "FLOW-002",
          "description": "Excess PV calculation",
          "acceptance_criteria": [
            "Excess = generation - demand when positive, else 0",
            "Function accepts generation and demand series",
            "Returns excess series same length as inputs",
            "All values non-negative"
          ],
          "dependencies": ["FLOW-001"],
          "passes": true
        },
        {
          "id": "FLOW-003",
          "description": "Battery charge from excess logic",
          "acceptance_criteria": [
            "Excess PV directed to battery first",
            "Respects battery charge rate and SOC limits",
            "Returns energy actually charged",
            "Updates battery state"
          ],
          "dependencies": ["FLOW-002", "BAT-006"],
          "passes": true
        },
        {
          "id": "FLOW-004",
          "description": "Remaining excess for grid export calculation",
          "acceptance_criteria": [
            "Export = excess - battery_charged",
            "Only positive when battery full or charge rate exceeded",
            "Returns export series",
            "All values non-negative"
          ],
          "dependencies": ["FLOW-003"],
          "passes": true
        },
        {
          "id": "FLOW-005",
          "description": "Demand shortfall calculation",
          "acceptance_criteria": [
            "Shortfall = demand - generation when positive, else 0",
            "Represents energy needed from battery or grid",
            "Returns shortfall series same length as inputs",
            "All values non-negative"
          ],
          "dependencies": ["FLOW-001"],
          "passes": true
        },
        {
          "id": "FLOW-006",
          "description": "Battery discharge to meet shortfall logic",
          "acceptance_criteria": [
            "Shortfall draws from battery first",
            "Respects battery discharge rate and SOC limits",
            "Returns energy actually discharged",
            "Updates battery state"
          ],
          "dependencies": ["FLOW-005", "BAT-007"],
          "passes": true
        },
        {
          "id": "FLOW-007",
          "description": "Grid import for remaining shortfall calculation",
          "acceptance_criteria": [
            "Import = shortfall - battery_discharged",
            "Only positive when battery empty or discharge rate exceeded",
            "Returns import series",
            "All values non-negative"
          ],
          "dependencies": ["FLOW-006"],
          "passes": true
        },
        {
          "id": "FLOW-008",
          "description": "Energy balance validation",
          "acceptance_criteria": [
            "At each timestep: generation + import = consumption + export + storage_delta",
            "Validation function checks balance within tolerance (floating point)",
            "Raises error if balance violated",
            "Tolerance configurable (default 0.001 kWh)"
          ],
          "dependencies": ["FLOW-004", "FLOW-007"],
          "passes": true
        }
      ]
    },
    {
      "name": "Single Home Simulation",
      "priority": 1,
      "features": [
        {
          "id": "HOME-001",
          "description": "Home configuration combining PV, battery, and load parameters",
          "acceptance_criteria": [
            "HomeConfig dataclass with pv_config, battery_config, load_config",
            "Optional battery (can be None for PV-only home)",
            "Location reference for weather data",
            "Optional name/identifier field"
          ],
          "dependencies": ["PV-001", "BAT-001", "LOAD-003"],
          "passes": false
        },
        {
          "id": "HOME-002",
          "description": "Simulate single home for date range",
          "acceptance_criteria": [
            "Function accepts HomeConfig, start_date, end_date",
            "Retrieves/generates weather and load data for period",
            "Runs PV generation model",
            "Runs energy flow logic for each timestep",
            "Returns simulation results object"
          ],
          "dependencies": ["HOME-001", "PV-007", "LOAD-006", "FLOW-008"],
          "passes": false
        },
        {
          "id": "HOME-003",
          "description": "Comprehensive simulation results",
          "acceptance_criteria": [
            "Results include: generation, consumption, self_consumption",
            "Results include: grid_import, grid_export",
            "Results include: battery_soc (if battery present)",
            "Results include: battery_charge, battery_discharge",
            "All as time series with 1-minute resolution"
          ],
          "dependencies": ["HOME-002"],
          "passes": false
        },
        {
          "id": "HOME-004",
          "description": "Results as pandas DataFrame with datetime index",
          "acceptance_criteria": [
            "Results accessible as DataFrame via .to_dataframe() or similar",
            "DatetimeIndex with 1-minute frequency",
            "Column names are clear and consistent",
            "Timezone-aware index"
          ],
          "dependencies": ["HOME-003"],
          "passes": false
        },
        {
          "id": "HOME-005",
          "description": "Summary statistics calculation",
          "acceptance_criteria": [
            "Total generation in kWh for period",
            "Total consumption in kWh",
            "Total self-consumption in kWh",
            "Total import and export in kWh",
            "Peak values (max generation, max demand)",
            "Average daily values"
          ],
          "dependencies": ["HOME-003"],
          "passes": false
        }
      ]
    },
    {
      "name": "Fleet Simulation",
      "priority": 2,
      "features": [
        {
          "id": "FLEET-001",
          "description": "Fleet configuration with N homes",
          "acceptance_criteria": [
            "FleetConfig holds list of HomeConfig objects",
            "Can specify number of homes (convenience constructor)",
            "Can specify mix of configurations",
            "Validates all homes have compatible locations/timezones"
          ],
          "dependencies": ["HOME-001"],
          "passes": false
        },
        {
          "id": "FLEET-002",
          "description": "Heterogeneous home configurations",
          "acceptance_criteria": [
            "Homes can have different PV sizes (e.g., 3-6 kW)",
            "Homes can have different battery sizes (including none)",
            "Homes can have different consumption levels",
            "Distribution of configs can be specified or randomised"
          ],
          "dependencies": ["FLEET-001"],
          "passes": false
        },
        {
          "id": "FLEET-003",
          "description": "Simulate all homes for same period",
          "acceptance_criteria": [
            "Function accepts FleetConfig, start_date, end_date",
            "Simulates each home for the period",
            "Weather data shared across homes (same location)",
            "Returns collection of per-home results"
          ],
          "dependencies": ["FLEET-001", "HOME-002"],
          "passes": false
        },
        {
          "id": "FLEET-004",
          "description": "Per-home results tracking",
          "acceptance_criteria": [
            "Each home's results accessible by home ID/index",
            "Same result structure as single home simulation",
            "Can iterate over all home results",
            "Memory-efficient for large fleets"
          ],
          "dependencies": ["FLEET-003"],
          "passes": false
        },
        {
          "id": "FLEET-005",
          "description": "Fleet aggregate results",
          "acceptance_criteria": [
            "Total fleet generation (sum across homes)",
            "Total fleet consumption",
            "Total fleet export to grid",
            "Total fleet import from grid",
            "Available as time series and totals"
          ],
          "dependencies": ["FLEET-004"],
          "passes": false
        },
        {
          "id": "FLEET-006",
          "description": "Fleet-level summary statistics",
          "acceptance_criteria": [
            "Fleet total generation, consumption, export, import in kWh",
            "Fleet self-consumption ratio",
            "Distribution statistics across homes (min, max, mean, median)",
            "Per-home contribution to fleet totals"
          ],
          "dependencies": ["FLEET-005"],
          "passes": false
        }
      ]
    },
    {
      "name": "Output and Reporting",
      "priority": 2,
      "features": [
        {
          "id": "OUT-001",
          "description": "Export results to CSV",
          "acceptance_criteria": [
            "Function exports DataFrame results to CSV file",
            "Datetime index formatted appropriately",
            "Column headers included",
            "Can specify output path"
          ],
          "dependencies": ["HOME-004"],
          "passes": false
        },
        {
          "id": "OUT-002",
          "description": "Summary report generation",
          "acceptance_criteria": [
            "Function generates text or markdown summary report",
            "Includes key metrics (generation, consumption, self-consumption)",
            "Includes ratios (self-consumption %, grid dependency %)",
            "Human-readable format"
          ],
          "dependencies": ["HOME-005"],
          "passes": false
        },
        {
          "id": "OUT-003",
          "description": "Self-consumption ratio calculation",
          "acceptance_criteria": [
            "Self-consumption ratio = self_consumed / total_generation",
            "Returns value between 0 and 1 (or percentage)",
            "Handles edge case of zero generation",
            "Available for single home and fleet"
          ],
          "dependencies": ["HOME-005"],
          "passes": false
        },
        {
          "id": "OUT-004",
          "description": "Grid dependency ratio calculation",
          "acceptance_criteria": [
            "Grid dependency = grid_import / total_consumption",
            "Returns value between 0 and 1 (or percentage)",
            "Handles edge case of zero consumption",
            "Lower value = more self-sufficient"
          ],
          "dependencies": ["HOME-005"],
          "passes": false
        },
        {
          "id": "OUT-005",
          "description": "Export ratio calculation",
          "acceptance_criteria": [
            "Export ratio = grid_export / total_generation",
            "Returns value between 0 and 1 (or percentage)",
            "Handles edge case of zero generation",
            "Higher value = more excess PV"
          ],
          "dependencies": ["HOME-005"],
          "passes": false
        },
        {
          "id": "OUT-006",
          "description": "Daily aggregation of results",
          "acceptance_criteria": [
            "Function aggregates 1-minute data to daily totals",
            "Sums energy values (kWh)",
            "Calculates daily peaks",
            "Returns DataFrame with daily DatetimeIndex"
          ],
          "dependencies": ["HOME-004"],
          "passes": false
        },
        {
          "id": "OUT-007",
          "description": "Monthly aggregation of results",
          "acceptance_criteria": [
            "Function aggregates to monthly totals",
            "Sums energy values",
            "Returns DataFrame with monthly period index",
            "Can aggregate from daily or minute data"
          ],
          "dependencies": ["OUT-006"],
          "passes": false
        },
        {
          "id": "OUT-008",
          "description": "Annual aggregation of results",
          "acceptance_criteria": [
            "Function aggregates to annual totals",
            "Sums energy values",
            "Returns single-row DataFrame or dict",
            "Suitable for multi-year comparison"
          ],
          "dependencies": ["OUT-007"],
          "passes": false
        }
      ]
    },
    {
      "name": "Configuration and Scenarios",
      "priority": 3,
      "features": [
        {
          "id": "CFG-001",
          "description": "YAML configuration file support",
          "acceptance_criteria": [
            "Function loads configuration from YAML file",
            "Parses into appropriate config dataclasses",
            "Validates required fields present",
            "Clear error messages for invalid config"
          ],
          "dependencies": ["HOME-001", "FLEET-001"],
          "passes": false
        },
        {
          "id": "CFG-002",
          "description": "JSON configuration file support",
          "acceptance_criteria": [
            "Function loads configuration from JSON file",
            "Same parsing/validation as YAML",
            "Auto-detects format by extension",
            "Equivalent functionality to YAML"
          ],
          "dependencies": ["CFG-001"],
          "passes": false
        },
        {
          "id": "CFG-003",
          "description": "Scenario definition structure",
          "acceptance_criteria": [
            "Scenario specifies: PV sizes, battery sizes, home count",
            "Scenario specifies: simulation period",
            "Scenario specifies: output preferences",
            "Can define multiple scenarios in one file"
          ],
          "dependencies": ["CFG-001"],
          "passes": false
        },
        {
          "id": "CFG-004",
          "description": "Default Bristol Phase 1 scenario",
          "acceptance_criteria": [
            "Pre-defined scenario for 100 homes in Bristol",
            "Realistic mix of PV sizes (3-6 kW)",
            "Realistic mix of battery sizes (0, 5, 10 kWh)",
            "Realistic consumption distribution",
            "Can be loaded as default scenario"
          ],
          "dependencies": ["CFG-003"],
          "passes": false
        },
        {
          "id": "CFG-005",
          "description": "Parameter sweep functionality",
          "acceptance_criteria": [
            "Can specify parameter ranges (e.g., battery 0-15 kWh in 1 kWh steps)",
            "Runs simulation for each parameter value",
            "Collects results across parameter range",
            "Enables sensitivity analysis"
          ],
          "dependencies": ["CFG-003", "FLEET-003"],
          "passes": false
        }
      ]
    },
    {
      "name": "Validation and Testing",
      "priority": 1,
      "features": [
        {
          "id": "VAL-001",
          "description": "Sanity check for PV generation values",
          "acceptance_criteria": [
            "Generation never negative",
            "Generation zero at night",
            "Peak generation does not exceed system capacity",
            "Annual generation within expected range for UK (800-1000 kWh/kWp)"
          ],
          "dependencies": ["PV-007"],
          "passes": false
        },
        {
          "id": "VAL-002",
          "description": "Sanity check for consumption values",
          "acceptance_criteria": [
            "Consumption never negative",
            "Consumption never unrealistically high (e.g., > 50 kW for domestic)",
            "Annual total within reasonable range of target",
            "Baseload present (consumption > 0 most times)"
          ],
          "dependencies": ["LOAD-006"],
          "passes": false
        },
        {
          "id": "VAL-003",
          "description": "Benchmark validation for self-consumption without battery",
          "acceptance_criteria": [
            "PV-only home achieves ~25-35% self-consumption (UK benchmark)",
            "Test with typical 4 kW system and 3,400 kWh/year consumption",
            "Document assumptions if outside range",
            "Test passes if within expected range or documented exception"
          ],
          "dependencies": ["HOME-005"],
          "passes": false
        },
        {
          "id": "VAL-004",
          "description": "Benchmark validation for self-consumption with battery",
          "acceptance_criteria": [
            "Home with PV + battery achieves ~60-80% self-consumption (UK benchmark)",
            "Test with typical 4 kW PV, 5 kWh battery, 3,400 kWh/year",
            "Battery significantly increases self-consumption over PV-only",
            "Document assumptions if outside range"
          ],
          "dependencies": ["VAL-003"],
          "passes": false
        },
        {
          "id": "VAL-005",
          "description": "Integration test for single home simulation",
          "acceptance_criteria": [
            "Simulates one home for 7 days",
            "All result fields populated",
            "Energy balance validates",
            "No errors or warnings",
            "Completes in reasonable time (< 30 seconds)"
          ],
          "dependencies": ["HOME-002"],
          "passes": false
        },
        {
          "id": "VAL-006",
          "description": "Integration test for fleet simulation",
          "acceptance_criteria": [
            "Simulates 10 homes for 7 days",
            "Per-home results accessible",
            "Fleet aggregates calculated correctly",
            "No errors or warnings",
            "Completes in reasonable time (< 2 minutes)"
          ],
          "dependencies": ["FLEET-003"],
          "passes": false
        }
      ]
    }
  ]
}
